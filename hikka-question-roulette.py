# meta developer: @Mr_Pizvion
# meta pic: none
# meta banner: https://example.com/banner.png

from .. import loader, utils
from telethon.tl.types import Message
import logging
import random
import asyncio
import requests

logger = logging.getLogger(__name__)

@loader.tds
class RandomQuestionGameMod(loader.Module):
    """üéÆ –ò–≥—Ä–∞ –≤ –≤–æ–ø—Ä–æ—Å—ã —Å 6 —Ä–µ–∂–∏–º–∞–º–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ò–ò)"""

    strings = {
        "name": "RandomQuestionGame",
        "menu": (
            "<b>üé≤ Random Question Game</b>\n\n"
            "<b>–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–µ–∂–∏–º—ã:</b>\n"
            "1Ô∏è‚É£ <b>–û–±—ã—á–Ω—ã–µ</b> ‚Äî –≤–æ–ø—Ä–æ—Å—ã –æ–±–æ –≤—Å—ë–º (—Ö–æ–±–±–∏, –µ–¥–∞, –º–µ—á—Ç—ã)\n"
            "2Ô∏è‚É£ <b>–õ–∏—á–Ω—ã–µ</b> ‚Äî —Å–µ–∫—Ä–µ—Ç—ã, —Å—Ç—Ä–∞—Ö–∏, —Å–æ–∂–∞–ª–µ–Ω–∏—è\n"
            "3Ô∏è‚É£ <b>–ü—Ä–æ—Ç–∏–≤</b> ‚Äî –≤–æ–ø—Ä–æ—Å—ã –ø—Ä–æ —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞–ø—Ä–æ—Ç–∏–≤ (–∫—Ç–æ —á–∞—â–µ...)\n"
            "4Ô∏è‚É£ <b>–ü–∏–∫–∞–Ω—Ç–Ω—ã–µ</b> ‚Äî 18+/—Ñ–ª–∏—Ä—Ç (–ø–æ—Ü–µ–ª—É–∏, —Ç–∏–ø–∞–∂–∏, —Å–≤–∏–¥–∞–Ω–∏—è)\n"
            "5Ô∏è‚É£ <b>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ</b> ‚Äî –ø—Ä–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä, —ç–º–æ—Ü–∏–∏, —Å—Ç—Ä–µ—Å—Å\n"
            "6Ô∏è‚É£ <b>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ</b> ‚Äî –∑–∞–¥–∞–Ω–∏—è –∏–∑ —Å–æ—Ü—Å–µ—Ç–µ–π (—Å–µ–ª—Ñ–∏, —Å–æ–æ–±—â–µ–Ω–∏—è)\n\n"
            "<b>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</b>\n"
            "1. –ù–∞–ø–∏—à–∏ .1, .2, .3, .4, .5 –∏–ª–∏ .6 –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞\n"
            "2. –ë–æ—Ç —Å—Ä–∞–∑—É –∑–∞–¥–∞—Å—Ç –≤–æ–ø—Ä–æ—Å\n"
            "3. –ò–≥—Ä–æ–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –æ—Ç–≤–µ—á–∞—é—Ç\n\n"
            "<b>–ö–æ–º–∞–Ω–¥—ã:</b>\n"
            ".game ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ –º–µ–Ω—é\n"
            ".1 –¥–æ .6 ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å"
        ),
        "question": "<b>‚ùì –í–æ–ø—Ä–æ—Å ({})</b>\n<code>{}</code>",
        "generating": "<b>üîÑ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –≤–æ–ø—Ä–æ—Å...</b>",
    }

    def __init__(self):
        # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è API
        self.fallback_questions = {
            "1": [  # –û–±—ã—á–Ω—ã–µ
                "–ö–∞–∫–æ–µ —Ç–≤–æ—ë –ª—é–±–∏–º–æ–µ –±–ª—é–¥–æ?",
                "–ß—Ç–æ —Ç—ã –±—É–¥–µ—à—å –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –≤—ã–∏–≥—Ä–∞–µ—à—å –º–∏–ª–ª–∏–æ–Ω?",
                "–ö–∞–∫–æ–π —Ç–≤–æ–π —Å–∞–º—ã–π —Å—Ç—Ä–∞–Ω–Ω—ã–π —Å—Ç—Ä–∞—Ö?",
                "–ö–∞–∫–∞—è –º—É–∑—ã–∫–∞ –ø–æ–¥–Ω–∏–º–∞–µ—Ç —Ç–µ–±–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?",
                "–ì–¥–µ —Ç—ã –º–µ—á—Ç–∞–µ—à—å –ø–æ–±—ã–≤–∞—Ç—å?",
                "–ß—Ç–æ —Ç—ã —Ü–µ–Ω–∏—à—å –≤ –¥—Ä—É–∑—å—è—Ö –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
                "–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π —Ñ–∏–ª—å–º?",
                "–ö–∞–∫–æ–µ —Ö–æ–±–±–∏ —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å?",
                "–ß—Ç–æ —Ç–µ–±—è –±–µ—Å–∏—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
                "–¢—ã –∂–∞–≤–æ—Ä–æ–Ω–æ–∫ –∏–ª–∏ —Å–æ–≤–∞?"
            ],
            "2": [  # –õ–∏—á–Ω—ã–µ
                "–ß—Ç–æ —Ç–µ–±—è –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –ø–ª–∞–∫–∞—Ç—å?",
                "–ö–æ–º—É —Ç—ã –¥–æ–≤–µ—Ä—è–µ—à—å –±–æ–ª—å—à–µ –≤—Å–µ—Ö?",
                "–ö–∞–∫–æ–π —É —Ç–µ–±—è —Å–∞–º—ã–π –±–æ–ª—å—à–æ–π —Å–µ–∫—Ä–µ—Ç?",
                "–ß–µ–≥–æ —Ç—ã —Å—Ç–µ—Å–Ω—è–µ—à—å—Å—è –≤ —Å–µ–±–µ?",
                "–û —á—ë–º —Ç—ã –∂–∞–ª–µ–µ—à—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
                "–ö–æ–≥–æ –∏–∑ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç—ã –∑–Ω–∞–µ—à—å –¥–æ–ª—å—à–µ –≤—Å–µ—Ö?",
                "–ß—Ç–æ –±—ã —Ç—ã –∏–∑–º–µ–Ω–∏–ª –≤ —Å–≤–æ—ë–º –ø—Ä–æ—à–ª–æ–º?",
                "–¢—ã –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –≤—Ä–∞–ª –ª—É—á—à–µ–º—É –¥—Ä—É–≥—É?",
                "–ß–µ–≥–æ —Ç—ã –±–æ–∏—à—å—Å—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö?",
                "–ß—Ç–æ —Ç–µ–±—è –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –ø–æ —É—Ç—Ä–∞–º?"
            ],
            "3": [  # –ü—Ä–æ—Ç–∏–≤
                "–ö—Ç–æ –∏–∑ –Ω–∞—Å —á–∞—â–µ –≤—Ä—ë—Ç?",
                "–ö—Ç–æ –±–æ–ª—å—à–µ —Ä–∏—Å–∫—É–µ—Ç –≤ –∂–∏–∑–Ω–∏?",
                "–ö—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –Ω–∞–π–¥—ë—Ç –ø–∞—Ä—É?",
                "–ö—Ç–æ —á–∞—â–µ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç?",
                "–ö—Ç–æ –ª—É—á—à–µ –≥–æ—Ç–æ–≤–∏—Ç?",
                "–ö—Ç–æ –±–æ–ª—å—à–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç?",
                "–ö—Ç–æ –±–æ–ª–µ–µ –ª–µ–Ω–∏–≤—ã–π?",
                "–ö—Ç–æ —á–∞—â–µ —Å–∏–¥–∏—Ç –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ?",
                "–ö—Ç–æ –ª—É—á—à–µ —Ç–∞–Ω—Ü—É–µ—Ç?",
                "–ö—Ç–æ –≥—Ä–æ–º—á–µ —Å–º–µ—ë—Ç—Å—è?"
            ],
            "4": [  # –ü–∏–∫–∞–Ω—Ç–Ω—ã–µ
                "–° –∫–µ–º –∏–∑ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç—ã –±—ã –ø–æ—Ü–µ–ª–æ–≤–∞–ª—Å—è?",
                "–ö–∞–∫–æ–π —Ç–∏–ø–∞–∂ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–≥–æ –ø–æ–ª–∞ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è?",
                "–ë—ã–ª –ª–∏ —É —Ç–µ–±—è –æ–ø—ã—Ç –Ω–∞ –æ–¥–Ω—É –Ω–æ—á—å?",
                "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∏–∑–º–µ–Ω–∞?",
                "–°–∞–º–æ–µ —Å–º–µ—à–Ω–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ –≤ —Ç–≤–æ–µ–π –∂–∏–∑–Ω–∏?",
                "–¢—ã –ª—é–±–∏—à—å —Ñ–ª–∏—Ä—Ç–æ–≤–∞—Ç—å?",
                "–ö–∞–∫–∞—è —á–∞—Å—Ç—å —Ç–µ–ª–∞ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –≤ –ª—é–¥—è—Ö?",
                "–ß—Ç–æ –±—ã —Ç—ã —Å–¥–µ–ª–∞–ª, –µ—Å–ª–∏ –±—ã –æ—Å—Ç–∞–ª—Å—è –Ω–∞–µ–¥–∏–Ω–µ —Å —á–µ–ª–æ–≤–µ–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è?",
                "–¢—ã –≤–µ—Ä–∏—à—å –≤ –ª—é–±–æ–≤—å —Å –ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞?",
                "–ö–∞–∫–æ–π –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç —Ç–µ–±–µ –∑–∞–ø–æ–º–Ω–∏–ª—Å—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?"
            ],
            "5": [  # –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ
                "–¢—ã —á–∞—â–µ —Å–ª—É—à–∞–µ—à—å —Ä–∞–∑—É–º –∏–ª–∏ —Å–µ—Ä–¥—Ü–µ?",
                "–ß—Ç–æ –≤—ã–±–µ—Å–∏—Ç —Ç–µ–±—è –∑–∞ —Å–µ–∫—É–Ω–¥—É?",
                "–¢—ã –∑–ª–æ–ø–∞–º—è—Ç–Ω—ã–π?",
                "–ö–∞–∫ —Ç—ã —Å–ø—Ä–∞–≤–ª—è–µ—à—å—Å—è —Å–æ —Å—Ç—Ä–µ—Å—Å–æ–º?",
                "–¢—ã –¥–æ–≤–µ—Ä—è–µ—à—å –ª—é–¥—è–º –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—à—å?",
                "–ß—Ç–æ –¥–ª—è —Ç–µ–±—è –∏–¥–µ–∞–ª—å–Ω—ã–π –æ—Ç–¥—ã—Ö?",
                "–¢—ã –±–æ–ª—å—à–µ –∏–Ω—Ç—Ä–æ–≤–µ—Ä—Ç –∏–ª–∏ —ç–∫—Å—Ç—Ä–∞–≤–µ—Ä—Ç?",
                "–ö–∞–∫ —Ç—ã –º–∏—Ä–∏—à—å—Å—è –ø–æ—Å–ª–µ —Å—Å–æ—Ä—ã?",
                "–¢—ã —á–∞—â–µ –∂–∞–ª–µ–µ—à—å –æ —Ç–æ–º, —á—Ç–æ —Å–¥–µ–ª–∞–ª –∏–ª–∏ –Ω–µ —Å–¥–µ–ª–∞–ª?",
                "–ß—Ç–æ —Ç–µ–±—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç?"
            ],
            "6": [  # –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ
                "–û—Ç–ø—Ä–∞–≤—å —Å–ª—É—á–∞–π–Ω–æ–µ —Ñ–æ—Ç–æ –∏–∑ –≥–∞–ª–µ—Ä–µ–∏ –≤ —á–∞—Ç",
                "–ù–∞–ø–∏—à–∏ '–ü—Ä–∏–≤–µ—Ç' –ª—é–±–æ–º—É –∫–æ–Ω—Ç–∞–∫—Ç—É –∏–∑ —Å–ø–∏—Å–∫–∞",
                "–ü–æ—Å—Ç–∞–≤—å –ª–∞–π–∫ –Ω–∞ —Å–∞–º—ã–π —Å—Ç–∞—Ä—ã–π –ø–æ—Å—Ç —É –¥—Ä—É–≥–∞",
                "–û—Ç–ø—Ä–∞–≤—å —Å–º–µ—à–Ω–æ–π –º–µ–º –≤ —á–∞—Ç",
                "–ù–∞–ø–∏—à–∏ –∫–æ–º–ø–ª–∏–º–µ–Ω—Ç —Å–æ—Å–µ–¥—É —Å–ø—Ä–∞–≤–∞",
                "–°–¥–µ–ª–∞–π —Å–µ–ª—Ñ–∏ –∏ –æ—Ç–ø—Ä–∞–≤—å —Å—é–¥–∞",
                "–ù–∞–ø–∏—à–∏ —Ä–∞–Ω–¥–æ–º–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–∞–º–µ",
                "–ü–æ—Å—Ç–∞–≤—å —Å—Ç–∞—Ç—É—Å '–Ø –≤ –∏–≥—Ä–µ' –Ω–∞ 10 –º–∏–Ω—É—Ç",
                "–û—Ç–ø—Ä–∞–≤—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å –ø–µ–Ω–∏–µ–º –ª—é–±–∏–º–æ–π –ø–µ—Å–Ω–∏",
                "–ù–∞–π–¥–∏ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ —Å–∞–º—ã–π —Å—Ç—Ä–∞–Ω–Ω—ã–π —Ñ–∞–∫—Ç –∏ —Å–∫–∏–Ω—å"
            ]
        }
        
        self.mode_names = {
            "1": "1Ô∏è‚É£ –û–±—ã—á–Ω—ã–µ",
            "2": "2Ô∏è‚É£ –õ–∏—á–Ω—ã–µ",
            "3": "3Ô∏è‚É£ –ü—Ä–æ—Ç–∏–≤",
            "4": "4Ô∏è‚É£ –ü–∏–∫–∞–Ω—Ç–Ω—ã–µ",
            "5": "5Ô∏è‚É£ –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ",
            "6": "6Ô∏è‚É£ –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ"
        }

    @loader.command()
    async def gamecmd(self, message: Message):
        """–ü–æ–∫–∞–∑–∞—Ç—å –º–µ–Ω—é –∏–≥—Ä—ã"""
        await utils.answer(message, self.strings("menu"))

    @loader.command()
    async def cmd1(self, message: Message):
        """–û–±—ã—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"""
        await self.get_question(message, "1")

    @loader.command()
    async def cmd2(self, message: Message):
        """–õ–∏—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"""
        await self.get_question(message, "2")

    @loader.command()
    async def cmd3(self, message: Message):
        """–í–æ–ø—Ä–æ—Å—ã –ø—Ä–æ—Ç–∏–≤"""
        await self.get_question(message, "3")

    @loader.command()
    async def cmd4(self, message: Message):
        """–ü–∏–∫–∞–Ω—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã"""
        await self.get_question(message, "4")

    @loader.command()
    async def cmd5(self, message: Message):
        """–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã"""
        await self.get_question(message, "5")

    @loader.command()
    async def cmd6(self, message: Message):
        """–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è"""
        await self.get_question(message, "6")

    async def generate_question_ai(self, mode_name: str) -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç—å (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)"""
        prompts = {
            "1": "–ü—Ä–∏–¥—É–º–∞–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π –Ω–∞ —Ç–µ–º—É: —Ö–æ–±–±–∏, –µ–¥–∞, –º–µ—á—Ç—ã, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è. –û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞.",
            "2": "–ü—Ä–∏–¥—É–º–∞–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π –Ω–∞ —Ç–µ–º—É: –ª–∏—á–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã, —Å—Ç—Ä–∞—Ö–∏, —Å–æ–∂–∞–ª–µ–Ω–∏—è. –û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞.",
            "3": "–ü—Ä–∏–¥—É–º–∞–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ '–ö—Ç–æ –∏–∑ –Ω–∞—Å...' (–Ω–∞–ø—Ä–∏–º–µ—Ä: –∫—Ç–æ —á–∞—â–µ –æ–ø–∞–∑–¥—ã–≤–∞–µ—Ç). –û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞.",
            "4": "–ü—Ä–∏–¥—É–º–∞–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π –Ω–∞ —Ç–µ–º—É: –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —Ñ–ª–∏—Ä—Ç, —Å–∏–º–ø–∞—Ç–∏–∏. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–≥—Ä–∏–≤—ã–º. –û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞.",
            "5": "–ü—Ä–∏–¥—É–º–∞–π –≤–æ–ø—Ä–æ—Å –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π –Ω–∞ —Ç–µ–º—É: —Ö–∞—Ä–∞–∫—Ç–µ—Ä, —ç–º–æ—Ü–∏–∏, —Å—Ç—Ä–µ—Å—Å. –í–æ–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å –∑–∞–¥—É–º–∞—Ç—å—Å—è. –û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º –≤–æ–ø—Ä–æ—Å–∞.",
            "6": "–ü—Ä–∏–¥—É–º–∞–π –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏: —Å–µ–ª—Ñ–∏, —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–æ—Å—Ç—ã. –û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–º –∑–∞–¥–∞–Ω–∏—è."
        }
        
        prompt = prompts.get(mode_name, prompts["1"])
        
        try:
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API (–±–µ–∑ –∫–ª—é—á–∞)
            response = requests.post(
                "https://api.openai.com/v1/chat/completions",  # –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π API –µ—Å–ª–∏ –µ—Å—Ç—å
                headers={
                    "Authorization": "Bearer YOUR_API_KEY",  # –í—Å—Ç–∞–≤—å —Å–≤–æ–π –∫–ª—é—á –µ—Å–ª–∏ –µ—Å—Ç—å
                    "Content-Type": "application/json"
                },
                json={
                    "model": "gpt-3.5-turbo",
                    "messages": [
                        {"role": "system", "content": "–¢—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∏–≥—Ä—ã. –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –≤–æ–ø—Ä–æ—Å–æ–º, –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π."},
                        {"role": "user", "content": prompt}
                    ],
                    "temperature": 0.9,
                    "max_tokens": 50
                },
                timeout=10
            )
            
            if response.status_code == 200:
                data = response.json()
                return data['choices'][0]['message']['content'].strip()
            else:
                return None
                
        except Exception as e:
            logger.error(f"AI generation error: {e}")
            return None

    async def get_question(self, message: Message, mode: str):
        """–ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞"""
        mode_display = self.mode_names.get(mode, f"–†–µ–∂–∏–º {mode}")
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        status_msg = await utils.answer(message, self.strings("generating"))
        
        # –ü—ã—Ç–∞–µ–º—Å—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å
        question = await self.generate_question_ai(mode)
        
        # –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—ã–π
        if not question:
            question = random.choice(self.fallback_questions[mode])
        
        # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
        await status_msg.delete()
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤–æ–ø—Ä–æ—Å
        await utils.answer(message, self.strings("question").format(mode_display, question))
